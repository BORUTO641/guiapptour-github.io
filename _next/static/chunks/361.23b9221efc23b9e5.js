(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{91361:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(57437),a=n(2265);n(35046),n(51750);var o=n(60759),l=n.n(o);n(74445);var i=n(12381);let c=(0,n(79205).Z)("Locate",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]]),s=[{name:"Desierto de la Tatacoa",lat:3.2308,lng:-75.1636,description:"Paisaje ex\xf3tico y observaci\xf3n astron\xf3mica."},{name:"Parque Arqueol\xf3gico San Agust\xedn",lat:1.8872,lng:-76.2944,description:"Patrimonio de la Humanidad UNESCO."},{name:"Termales de Rivera",lat:2.7758,lng:-75.2575,description:"Aguas termales relajantes."},{name:"Represa de Betania",lat:2.6983,lng:-75.4386,description:"Deportes n\xe1uticos y pesca."},{name:"Neiva (Capital)",lat:2.9273,lng:-75.2819,description:"Capital del departamento del Huila."}];function u(){let e=(0,a.useRef)(null),t=(0,a.useRef)(null),n=(0,a.useRef)(null),o=(0,a.useRef)(null),[u,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null);return(0,a.useEffect)(()=>(d(!0),()=>{if(o.current&&t.current){try{t.current.removeControl(o.current)}catch(e){console.warn("Error cleaning up routing control:",e)}o.current=null}t.current&&(t.current.remove(),t.current=null)}),[]),(0,a.useEffect)(()=>{if(!u||!e.current||t.current)return;let r=l().map(e.current).setView([2.5,-75.5],9);t.current=r,setTimeout(()=>{r.invalidateSize()},100),l().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r);let a=new(l()).Icon({iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});s.forEach(e=>{let t=l().marker([e.lat,e.lng],{icon:a}).addTo(r),n=document.createElement("div");n.className="p-2 min-w-[200px]",n.innerHTML='\n                <h3 class="font-bold text-lg mb-1">'.concat(e.name,'</h3>\n                <p class="text-sm text-gray-600 mb-3">').concat(e.description,"</p>\n            ");let o=document.createElement("button");o.className="bg-primary text-white px-4 py-2 rounded-md text-sm font-medium w-full hover:bg-primary/90 transition-colors shadow-sm",o.innerText="\uD83D\uDCCD C\xf3mo llegar aqu\xed",o.onclick=t=>{t.stopPropagation(),window.dispatchEvent(new CustomEvent("route-to",{detail:{lat:e.lat,lng:e.lng}}))},n.appendChild(o),t.bindPopup(n)});let i=new(l()).DivIcon({className:"bg-transparent",html:'<div class="relative flex h-6 w-6 items-center justify-center rounded-full bg-blue-500 border-2 border-white shadow-lg">\n                   <div class="h-2 w-2 rounded-full bg-white animate-pulse"></div>\n                 </div>',iconSize:[24,24],iconAnchor:[12,12]});r.locate({watch:!0,enableHighAccuracy:!0}).on("locationfound",function(e){p(e.latlng),n.current?n.current.setLatLng(e.latlng):n.current=l().marker(e.latlng,{icon:i}).addTo(r).bindPopup("Tu ubicaci\xf3n actual")}).on("locationerror",function(e){console.error("Location access denied or error:",e.message)});let c=e=>{let{lat:a,lng:i}=e.detail;if(!n.current&&!m){alert("Por favor permite el acceso a tu ubicaci\xf3n para calcular la ruta."),r.locate({setView:!0,maxZoom:16});return}let c=n.current?n.current.getLatLng():m;if(t.current&&c){if(o.current){try{t.current.removeControl(o.current)}catch(e){console.warn("Error removing existing routing control:",e)}o.current=null}try{o.current=l().Routing.control({waypoints:[l().latLng(c.lat,c.lng),l().latLng(a,i)],routeWhileDragging:!1,showAlternatives:!1,fitSelectedRoutes:!0,lineOptions:{styles:[{color:"#2563eb",weight:6,opacity:.8}],extendToWaypoints:!0,missingRouteTolerance:10},language:"es",createMarker:function(){return null}}).addTo(t.current)}catch(e){console.error("Error creating routing control:",e),alert("Error al calcular la ruta. Intenta de nuevo.")}}};return window.addEventListener("route-to",c),()=>{window.removeEventListener("route-to",c)}},[u]),(0,r.jsxs)("div",{className:"relative h-[500px] w-full overflow-hidden rounded-xl border shadow-sm bg-gray-100",children:[(0,r.jsx)("div",{ref:e,className:"h-full w-full"}),(0,r.jsx)("div",{className:"absolute bottom-4 right-4 z-[400]",children:(0,r.jsxs)(i.z,{size:"icon",onClick:()=>{let e=t.current;if(e&&n.current){let t=n.current.getLatLng();e.flyTo(t,16)}else e&&e.locate()},className:"h-10 w-10 rounded-full shadow-lg bg-white text-primary hover:bg-gray-100",children:[(0,r.jsx)(c,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Centrar en m\xed"})]})})]})}},51750:function(){},35046:function(){}}]);